<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>New Post</title>
</head>
<body>
<a href="/"> Back to Main page</a>
<p>Choose your image</p>
<br>
<br>
<button><p><label for="file" style="cursor: pointer;">Upload Image</label></p></button>
<p><img id="output" width="200"/></p>

<form enctype="multipart/form-data" method="post" action="{% url 'add_post' user.get_username %}">
    {% csrf_token %}
    <p><input type="file" accept="image/*" name="image" id="file" onchange="loadFile(event)" style="display: none;"></p>
    <input type="text" size="50"  name="description">
    <br>
    <input type="submit" value="Upload Post"></p>

    {{form.as_p}}
</form>

<script>
    var loadFile = function (event) {
        var image = document.getElementById('output');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>
</body>
</html>